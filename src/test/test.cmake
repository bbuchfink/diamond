SET(CMD "./diamond ${ARGS} -o ${NAME}.out")
#separate_arguments (SEP NATIVE_COMMAND PROGRAM SEPARATE_ARGS ${CMD})
separate_arguments (SEP NATIVE_COMMAND ${CMD})
execute_process(COMMAND ${SEP} RESULT_VARIABLE CMD_RESULT)
if(CMAKE_HOST_WIN32)
  execute_process(COMMAND busybox diff ${TEST_DIR}/${NAME}.out ${NAME}.out RESULT_VARIABLE DIFF_RESULT)
else()
  execute_process(COMMAND diff ${TEST_DIR}/${NAME}.out ${NAME}.out RESULT_VARIABLE DIFF_RESULT)
endif()
if(NOT ${DIFF_RESULT} EQUAL 0)
  message(FATAL_ERROR "${NAME} failed.")
endif()